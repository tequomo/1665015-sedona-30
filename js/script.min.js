const modalSection=document.querySelector(".modal"),modalButton=document.querySelector(".availability-search-button"),searchForm=modalSection.querySelector(".search-form"),arrivalDate=modalSection.querySelector(".search-field-arrival"),departureDate=modalSection.querySelector(".search-field-departure"),adultsAmount=modalSection.querySelector(".search-field-adults"),childrenAmount=modalSection.querySelector(".search-field-children"),adultsAmountMin=adultsAmount.min,adultsAmountMax=adultsAmount.max,childrenAmountMin=childrenAmount.min,childrenAmountMax=childrenAmount.max,arrivalCalendar=modalSection.querySelector(".arrival-block button"),departureCalendar=modalSection.querySelector(".departure-block button"),adultsAmountDecrease=modalSection.querySelector(".guests-block span:first-of-type button:first-of-type"),adultsAmountIncrease=modalSection.querySelector(".guests-block span:first-of-type button:last-of-type"),childrenAmountDecrease=modalSection.querySelector(".guests-block span:last-of-type button:first-of-type"),childrenAmountIncrease=modalSection.querySelector(".guests-block span:last-of-type button:last-of-type"),modalSubmitButton=modalSection.querySelector(".search-button");let isStorageSupport=!0,storageArrivalDate="",storageDepartureDate="",storageAdultsAmount="",storageChildrenAmount="";window.onload=function(){modalSection.classList.add("modal-animate-up"),searchForm.querySelector("fieldset").disabled=!0},modalButton.addEventListener("click",function(e){modalSection.classList.contains("modal-animate-up")?(modalSection.classList.remove("modal-animate-up"),modalSection.classList.add("modal-animate-down"),searchForm.querySelector("fieldset").disabled=!1,modalSection.focus(),storageArrivalDate&&(arrivalDate.value=storageArrivalDate),storageDepartureDate&&(departureDate.value=storageDepartureDate),storageAdultsAmount&&(adultsAmount.value=storageAdultsAmount),storageChildrenAmount&&(childrenAmount.value=storageChildrenAmount)):modalSection.classList.contains("modal-animate-down")&&(modalSection.classList.remove("modal-animate-down"),modalSection.classList.add("modal-animate-up"),searchForm.querySelector("fieldset").disabled=!0,modalSection.classList.contains("modal-animate-error")&&modalSection.classList.remove("modal-animate-error"))}),adultsAmountDecrease.addEventListener("click",function(e){this.nextElementSibling.stepDown()}),adultsAmountIncrease.addEventListener("click",function(e){this.previousElementSibling.stepUp()}),childrenAmountDecrease.addEventListener("click",function(e){this.nextElementSibling.stepDown()}),childrenAmountIncrease.addEventListener("click",function(e){this.previousElementSibling.stepUp()});try{storageArrivalDate=localStorage.getItem("arrivalDate"),storageDepartureDate=localStorage.getItem("departureDate"),storageAdultsAmount=localStorage.getItem("adultsAmount"),storageChildrenAmount=localStorage.getItem("childrenAmount")}catch(e){isStorageSupport=!1}searchForm.addEventListener("submit",function(e){arrivalDate.value&&departureDate.value&&adultsAmount.value&&childrenAmount.value?isStorageSupport&&(localStorage.setItem("arrivalDate",arrivalDate.value),localStorage.setItem("departureDate",departureDate.value),localStorage.setItem("adultsAmount",adultsAmount.value),localStorage.setItem("childrenAmount",childrenAmount.value)):(e.preventDefault(),modalSection.classList.add("modal-animate-error"))}),adultsAmount.addEventListener("change",function(){var e=parseInt(this.value);e<adultsAmountMin&&(this.value=adultsAmountMin),e>adultsAmountMax&&(this.value=adultsAmountMax)}),childrenAmount.addEventListener("change",function(){var e=parseInt(this.value);e<childrenAmountMin&&(this.value=childrenAmountMin),e>childrenAmountMax&&(this.value=childrenAmountMax)}),modalSubmitButton.addEventListener("click",function(e){modalSection.classList.contains("modal-animate-error")&&modalSection.classList.remove("modal-animate-error")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(modalSection.classList.contains("modal-animate-down")&&(e.preventDefault(),modalSection.classList.remove("modal-animate-down"),modalSection.offsetWidth=modalSection.offsetWidth,modalSection.classList.add("modal-animate-up")),modalSection.classList.contains("modal-animate-error")&&modalSection.classList.remove("modal-animate-error"))});